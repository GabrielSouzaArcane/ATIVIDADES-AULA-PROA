(("undefined"!==typeof self?self:this).webpackJsonp=("undefined"!==typeof self?self:this).webpackJsonp||[]).push([[186],{1058:function(t,e,i){},1083:function(t,e,i){"use strict";var o=i(141),r=i(0),s=function(t,e,i,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s<3?r(n):s>3?r(e,i,n):r(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n},n=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class extends r.j{get isLightColorScheme(){return"light"===this.colorScheme}get tipColor(){return"forced_white"===this.color?"rgb(255, 255, 255)":this.shouldMatchApprovalColor?this.parseColorToRgbString(Object(o.f)({postColor:this.color,isLightColorScheme:this.isLightColorScheme})):this.parseColorToRgbString(Object(o.h)({postColor:this.color,isLightColorScheme:this.isLightColorScheme}))}parseColorToRgbString(t){return`rgb(${t.r}, ${t.g}, ${t.b})`}};s([Object(r.h)({type:String,default:null}),n("design:type",Object)],a.prototype,"color",void 0),s([Object(r.h)({default:!1}),n("design:type",Boolean)],a.prototype,"shouldMatchApprovalColor",void 0),s([r.d,n("design:type",Boolean)],a.prototype,"isUsingNewSurfaceShadows",void 0),s([r.d,n("design:type",String)],a.prototype,"colorScheme",void 0),a=s([Object(r.b)({})],a);var d=a,l=(i(1097),i(4)),c=Object(l.a)(d,(function(){var t=this._self._c;this._self._setupProxy;return t("div",{class:["color-"+(this.color||"default"),this.isUsingNewSurfaceShadows&&"drop-shadow-elevation-1"]},[this._t("default"),this._v(" "),t("svg",{staticClass:"popup-bubble-anchor-tip",attrs:{width:"55",height:"16",viewBox:"0 0 55 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M0.00219655 0C6.36739 0 12.4719 2.52856 16.9727 7.02944L24.1939 14.2506C25.756 15.8127 28.2887 15.8127 29.8508 14.2506L37.072 7.02943C41.5729 2.52856 47.6774 -1.32551e-06 54.0426 0C54.0996 1.18735e-08 -0.398293 0 0.00219655 0Z",fill:this.tipColor}})])],2)}),[],!1,null,null,null);e.a=c.exports},1097:function(t,e,i){"use strict";i(1058)},1180:function(t,e,i){},1315:function(t,e,i){"use strict";i(1180)},1412:function(t,e,i){"use strict";i.r(e);var o,r,s=i(993),n=i(27),a=i(25),d=i(1),l=i(68),c=i(0),p=i(262),u=i(79),g=i(1083),h=i(992),b=i(1096),y=i.n(b),f=function(t,e,i,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s<3?r(n):s>3?r(e,i,n):r(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n},v=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let m=class extends c.j{constructor(){super(...arguments),this.postCidBeingDragged=null,this.dragging=!1}shouldMatchApprovalColor(t,e){return!e&&(t?this.canIModerate:!this.canIModerate)}bubbleDraggingState(t){this.$emit("dragging",t)}wasWrittenByCurrentUser(t){return!!this.user.id&&String(t.author_id)===String(this.user.id)}isEditableByCurrentUser(t){return this.canIModerate||this.wasWrittenByCurrentUser(t)&&this.canIWrite}onStartDrag(t){this.dragging=!0;const e=document.querySelector(".draggable-mirror");if(e){const i=e.getBoundingClientRect(),o=i.left+i.width/2,r=(t.originalEvent.clientX||t.originalEvent.pageX)-o-11;this.dragCloneStyle.innerHTML=`\n        .draggable-mirror .wish-popup-marker .circle-marker,\n        .draggable-mirror .wish-popup-marker .drag-vertical-line:before,\n        .draggable-mirror .wish-popup-marker .drag-vertical-line:after {\n          transform: translate(${r}px, 0px);\n        }\n      `,this.mutationObserver=new MutationObserver(t=>{const e=t[0].target.style.transform.replace("matrix(","").replace(")","").split(","),i=-e[e.length-1];this.dragCloneStyle.innerHTML=`\n          .draggable-mirror .wish-popup-marker .circle-marker,\n          .draggable-mirror .wish-popup-marker .drag-vertical-line:before,\n          .draggable-mirror .wish-popup-marker .drag-vertical-line:after {\n            transform: translate(${r}px, ${i}px);\n          }\n        `}),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["style"]})}}addDragJustEndClass(t){t.classList.add("drag-just-end"),setTimeout(()=>{t.classList.remove("drag-just-end")},100)}onEndDrag(t){this.addDragJustEndClass(t.item),this.dragging=!1}onMove(t){const e=t.dragged.dataset.postCid;this.postCidBeingDragged=e}get draggableSortablePostArray(){return[...this.currentSortedPosts]}set draggableSortablePostArray(t){this.postCidBeingDragged&&(this.reorder(this.postCidBeingDragged,t),this.postCidBeingDragged=null)}reorder(t,e){if(Object(a.a)("wishOrderArray")){const i=e.map(t=>t.cid),o=i.indexOf(t),r=0===o?null:i[o-1],s=o===e.length-1?null:i[o+1];this.sortedPost({previousCid:r,nextCid:s,postCid:t})}if(!Object(a.a)("wishOrderArray")){const i=e.map(t=>t.cid),o=e.map(t=>t.id),r=i.indexOf(t),s=0===r?null:o[r-1],n=r===e.length-1?null:o[r+1],a=Object(p.b)(null,{prevId:null===n?null:"wish-"+n,nextId:null===s?null:"wish-"+s}).sortIndex;this.sortedPost({postCid:t,sortIndex:a})}}preemptAnimation(t){t&&this.$refs.surfacePosts.forEach(t=>{this.setPosition(t)})}setPosition(t){var e,i,o,r,s,n,a,d;t.dataset.top=t.getBoundingClientRect().top-(null!==(r=null===(o=null===(i=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.getBoundingClientRect())||void 0===o?void 0:o.top)&&void 0!==r?r:0)-parseInt(getComputedStyle(t).marginTop,10)+"px",t.dataset.left=t.getBoundingClientRect().left-(null!==(d=null===(a=null===(n=null===(s=t.parentElement)||void 0===s?void 0:s.parentElement)||void 0===n?void 0:n.getBoundingClientRect())||void 0===a?void 0:a.left)&&void 0!==d?d:0)-parseInt(getComputedStyle(t).marginLeft,10)+"px"}startLeaveAnimation(t){var e,i,o,r;t.style.left=null!==(e=t.dataset.left)&&void 0!==e?e:"",t.style.top=null!==(i=t.dataset.top)&&void 0!==i?i:"",t.style.position="absolute";const s=null===(o=t.parentElement)||void 0===o?void 0:o.parentElement;null===(r=t.parentElement)||void 0===r||r.removeChild(t),null===s||void 0===s||s.appendChild(t)}mounted(){this.dragCloneStyle=document.createElement("style"),document.head.appendChild(this.dragCloneStyle)}};f([Object(c.h)({}),v("design:type",Object)],m.prototype,"postBeingEditedCid",void 0),f([Object(c.h)({}),v("design:type",Boolean)],m.prototype,"inlinePostEdit",void 0),f([Object(c.h)({}),v("design:type",Array)],m.prototype,"currentSortedPosts",void 0),f([Object(c.h)({default:()=>{}}),v("design:type","function"===typeof(o="undefined"!==typeof Record&&Record)?o:Object)],m.prototype,"reactionIdsByPostId",void 0),f([Object(c.h)({default:()=>{}}),v("design:type","function"===typeof(r="undefined"!==typeof Record&&Record)?r:Object)],m.prototype,"commentIdsByPostId",void 0),f([c.i,v("design:type",Object)],m.prototype,"user",void 0),f([c.d,v("design:type",Boolean)],m.prototype,"canIModerate",void 0),f([c.d,v("design:type",Boolean)],m.prototype,"canIWrite",void 0),f([Object(c.m)("post").Action,v("design:type",Function)],m.prototype,"sortedPost",void 0),f([Object(c.m)("postFilter").Getter,v("design:type",Boolean)],m.prototype,"xFilterPopover",void 0),f([Object(c.k)("dragging"),v("design:type",Function),v("design:paramtypes",[Object]),v("design:returntype",void 0)],m.prototype,"bubbleDraggingState",null),f([Object(c.k)("xFilterPopover"),v("design:type",Function),v("design:paramtypes",[Boolean]),v("design:returntype",void 0)],m.prototype,"preemptAnimation",null),m=f([Object(c.b)({components:{SurfacePost:h.a,SurfacePopupWithTip:g.a,Draggable:y.a}})],m);var w,P,C=m,O=i(4),S=Object(O.a)(C,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("draggable",{ref:"draggableWrapper",staticClass:"wish-draggable-wrapper",attrs:{"force-fallback":!0,delay:150,"delay-on-touch-only":!0,handle:".wish-popup-marker, .wish-popup",animation:250,"scroll-sensitivity":250,filter:".no-drag","prevent-on-filter":!1,disabled:!!t.postBeingEditedCid,move:t.onMove,"invert-swap":!0,"drag-class":"draggable-mirror"},on:{start:t.onStartDrag,end:t.onEndDrag},model:{value:t.draggableSortablePostArray,callback:function(e){t.draggableSortablePostArray=e},expression:"draggableSortablePostArray"}},[e("transition-group",{staticClass:"flex h-full current-wishes",attrs:{tag:"div","enter-class":"opacity-0","enter-active-class":"transform-opacity ease-out duration-500","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-500","leave-to-class":" opacity-0",duration:500},on:{"before-leave":t.startLeaveAnimation}},t._l(t.draggableSortablePostArray,(function(i,o){return e("div",{key:i.cid,ref:"surfacePosts",refInFor:!0,class:["wish-wrapper",o%2?"below-line":"above-line",{"no-drag":!t.isEditableByCurrentUser(i)||!!t.postBeingEditedCid}],attrs:{"data-post-cid":i.cid}},[e("div",{staticClass:"wish-popup-marker"},[e("div",{staticClass:"circle-marker"}),t._v(" "),e("div",{staticClass:"drag-vertical-line"})]),t._v(" "),e("surface-popup-with-tip",{class:["wish-popup",o%2?"below-line":"above-line"],attrs:{color:i.color,"should-match-approval-color":t.shouldMatchApprovalColor(o%2===0,i.published)}},[e("surface-post",{attrs:{index:o,post:i,edit:t.inlinePostEdit,"put-attachment-on-top":!0,"is-last":o===t.currentSortedPosts.length-1,"x-shadow":!1,"post-reaction-ids":t.reactionIdsByPostId[i.id],"post-comment-ids":t.commentIdsByPostId[i.id]}})],1)],1)})),0)],1)}),[],!1,null,null,null).exports,j=i(1314),x=function(t,e,i,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s<3?r(n):s>3?r(e,i,n):r(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n},B=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let I=class extends c.j{constructor(){super(...arguments),this.postCidBeingDragged=null,this.dragging=!1}shouldMatchApprovalColor(t,e){return!e&&(t?this.canIModerate:!this.canIModerate)}bubbleDraggingState(t){this.$emit("dragging",t)}wasWrittenByCurrentUser(t){return!!this.user.id&&String(t.author_id)===String(this.user.id)}isEditableByCurrentUser(t){return this.canIModerate||this.wasWrittenByCurrentUser(t)&&this.canIWrite}get draggableSortablePostArray(){return[...this.currentSortedPosts]}set draggableSortablePostArray(t){this.postCidBeingDragged&&(this.reorder(this.postCidBeingDragged,t),this.postCidBeingDragged=null)}reorder(t,e){if(Object(a.a)("wishOrderArray")){const i=e.map(t=>t.cid),o=i.indexOf(t),r=0===o?null:i[o-1],s=o===e.length-1?null:i[o+1];this.sortedPost({previousCid:r,nextCid:s,postCid:t})}if(!Object(a.a)("wishOrderArray")){const i=e.map(t=>t.cid),o=e.map(t=>t.id),r=i.indexOf(t),s=0===r?null:o[r-1],n=r===e.length-1?null:o[r+1],a=Object(p.b)(null,{prevId:null===n?null:"wish-"+n,nextId:null===s?null:"wish-"+s}).sortIndex;this.sortedPost({postCid:t,sortIndex:a})}}makeSortable(){this.sortable=new j.Sortable(this.$el,{draggable:".wish-wrapper",handle:".circle-marker, .wish-popup",distance:2,mirror:{constrainDimensions:!0,yAxis:!1}}),this.sortable.on("drag:start",t=>{const e=t.originalSource.dataset.postCid,i=this.currentSortedPosts.find(t=>t.cid===e);if(!i||!this.isEditableByCurrentUser(i)||this.postBeingEditedCid)return void t.cancel();const o=t.originalSource,r=o.parentNode;null===r||void 0===r||r.appendChild(o),this.postCidBeingDragged=t.originalSource.dataset.postCid||null,this.arrayDuringSorting=[...this.draggableSortablePostArray],this.dragging=!0}),this.sortable.on("mirror:created",t=>{const e=t.mirror;if(e){const i=t.source.querySelector(".wish-popup").getBoundingClientRect(),o=i.right+i.width/2,r=t.sensorEvent.clientX-o;e.style.right=r+"px",this.mutationObserver=new MutationObserver(t=>{e.style.right=r+"px"}),this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["style"]})}}),this.sortable.on("sortable:sorted",t=>{const e=[...this.arrayDuringSorting];e.splice(t.newIndex,0,e.splice(t.oldIndex,1)[0]),this.arrayDuringSorting=e}),this.sortable.on("drag:stop",t=>{var e;this.draggableSortablePostArray=this.arrayDuringSorting,null===(e=this.mutationObserver)||void 0===e||e.disconnect(),this.dragging=!1})}preemptAnimation(t){t&&this.$refs.surfacePosts.forEach(t=>{this.setPosition(t)})}setPosition(t){var e,i,o,r,s,n,a,d;t.dataset.top=t.getBoundingClientRect().top-(null!==(r=null===(o=null===(i=null===(e=t.parentElement)||void 0===e?void 0:e.parentElement)||void 0===i?void 0:i.getBoundingClientRect())||void 0===o?void 0:o.top)&&void 0!==r?r:0)-parseInt(getComputedStyle(t).marginTop,10)+"px",t.dataset.right=(null!==(d=null===(a=null===(n=null===(s=t.parentElement)||void 0===s?void 0:s.parentElement)||void 0===n?void 0:n.getBoundingClientRect())||void 0===a?void 0:a.right)&&void 0!==d?d:0)-t.getBoundingClientRect().right-parseInt(getComputedStyle(t).marginRight,10)+"px"}startLeaveAnimation(t){var e,i,o,r;t.style.right=null!==(e=t.dataset.right)&&void 0!==e?e:"",t.style.top=null!==(i=t.dataset.top)&&void 0!==i?i:"",t.style.position="absolute";const s=null===(o=t.parentElement)||void 0===o?void 0:o.parentElement;null===(r=t.parentElement)||void 0===r||r.removeChild(t),null===s||void 0===s||s.appendChild(t)}mounted(){this.makeSortable()}};x([Object(c.h)({}),B("design:type",Object)],I.prototype,"postBeingEditedCid",void 0),x([Object(c.h)({}),B("design:type",Boolean)],I.prototype,"inlinePostEdit",void 0),x([Object(c.h)({}),B("design:type",Array)],I.prototype,"currentSortedPosts",void 0),x([Object(c.h)({default:()=>{}}),B("design:type","function"===typeof(w="undefined"!==typeof Record&&Record)?w:Object)],I.prototype,"reactionIdsByPostId",void 0),x([Object(c.h)({default:()=>{}}),B("design:type","function"===typeof(P="undefined"!==typeof Record&&Record)?P:Object)],I.prototype,"commentIdsByPostId",void 0),x([Object(c.m)("postFilter").Getter,B("design:type",Boolean)],I.prototype,"xFilterPopover",void 0),x([c.i,B("design:type",Object)],I.prototype,"user",void 0),x([c.d,B("design:type",Boolean)],I.prototype,"canIModerate",void 0),x([c.d,B("design:type",Boolean)],I.prototype,"canIWrite",void 0),x([Object(c.m)("post").Action,B("design:type",Function)],I.prototype,"sortedPost",void 0),x([Object(c.k)("dragging"),B("design:type",Function),B("design:paramtypes",[Object]),B("design:returntype",void 0)],I.prototype,"bubbleDraggingState",null),x([Object(c.k)("xFilterPopover"),B("design:type",Function),B("design:paramtypes",[Boolean]),B("design:returntype",void 0)],I.prototype,"preemptAnimation",null),I=x([Object(c.b)({components:{SurfacePost:h.a,SurfacePopupWithTip:g.a}})],I);var E,R,k=I,A=Object(O.a)(k,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("transition-group",{ref:"draggableWrapper",staticClass:"wish-draggable-wrapper current-wishes",attrs:{tag:"div",disabled:!!t.postBeingEditedCid,"enter-class":"opacity-0","enter-active-class":"transform-opacity ease-out duration-500","enter-to-class":"opacity-100","leave-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-500","leave-to-class":" opacity-0",duration:500},on:{"before-leave":t.startLeaveAnimation}},t._l(t.draggableSortablePostArray,(function(i,o){return e("div",{key:i.cid,ref:"surfacePosts",refInFor:!0,class:["wish-wrapper",o%2?"below-line":"above-line"],attrs:{"data-post-cid":i.cid}},[e("div",{staticClass:"wish-popup-marker"},[e("div",{staticClass:"circle-marker"}),t._v(" "),e("div",{staticClass:"drag-vertical-line"})]),t._v(" "),e("surface-popup-with-tip",{class:["wish-popup",o%2?"below-line":"above-line"],attrs:{color:i.color,"should-match-approval-color":t.shouldMatchApprovalColor(o%2===0,i.published)}},[e("surface-post",{attrs:{index:o,post:i,"post-reaction-ids":t.reactionIdsByPostId[i.id],"post-comment-ids":t.commentIdsByPostId[i.id],edit:t.inlinePostEdit,"put-attachment-on-top":!0,"is-last":o===t.currentSortedPosts.length-1,"x-shadow":!1}})],1)],1)})),0)}),[],!1,null,null,null).exports,_=i(1094),L=i(1025),D=i(308),T=i(210),$=function(t,e,i,o){var r,s=arguments.length,n=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s<3?r(n):s>3?r(e,i,n):r(e,i))||n);return s>3&&n&&Object.defineProperty(e,i,n),n},M=function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)};let F=class extends c.j{constructor(){super(...arguments),this.isAtStart=!0,this.isAtEnd=!1,this.dragging=!1,this.isReactiveStoreSyncingFrozenForSorting=!1}get canShowAddPostButton(){const t=this.isReadOnly,e=(this.postBeingEditedCid,this.canIWrite);return!this.dragging&&!t&&e}respondToNewUserCreatedPost(t){this.scrollToPostWithCid(t)}respondToCommentsPanelOpenedForPostId(t){const e=document.getElementById("line-extended");if(!t)return void(e.style.width="100%");const i=document.getElementById("wish-"+t);if(!i)return;const o=i.closest(".wish-wrapper");if(!o)return;const r=o.offsetLeft-74;e.style.width="100vw",Object(l.a)(this.$refs.wishList).animate({scrollLeft:r},"350")}respondToPostBeingEditedCid(t){this.scrollToPostWithCid(t)}scrollToPostWithCid(t){t&&this.$nextTick(()=>{const t=document.getElementById("wish-new");if(!t)return;const e=t.closest(".wish-wrapper");if(!e)return;if(t.getBoundingClientRect().right+74>document.body.offsetWidth){const i=e.offsetLeft+t.offsetWidth-document.body.offsetWidth+74;Object(l.a)(this.$refs.wishList).animate({scrollLeft:i},"250")}})}addBefore(t){if(Object(a.a)("wishOrderArray")){let e,i;const o=this.currentSortedPosts.findIndex(e=>e.id===t.id);0===o?(e=this.currentSortedPosts[0].cid,i=null):(e=this.currentSortedPosts[o].cid,i=this.currentSortedPosts[o-1].cid),this.startNewPost({wishOrder:{previousCid:i,nextCid:e}})}if(!Object(a.a)("wishOrderArray")){let e,i;const o=this.currentSortedPosts.findIndex(e=>e.id===t.id);0===o?(e=this.currentSortedPosts[0].id,i=null):(e=this.currentSortedPosts[o-1].id,i=this.currentSortedPosts[o].id);const{sortIndex:r}=Object(p.b)(null,{prevId:"wish-"+e,nextId:"wish-"+i});this.startNewPost({attributes:{sortIndex:r}})}}addToLast(){if(Object(a.a)("wishOrderArray")){let t=null;this.currentSortedPosts.length>0&&(t=this.currentSortedPosts[this.currentSortedPosts.length-1].cid),this.startNewPost({wishOrder:{previousCid:t,nextCid:null}})}if(!Object(a.a)("wishOrderArray")){const{sortIndex:t}=Object(p.b)(null,{prevId:null,nextId:null});this.startNewPost({attributes:{sortIndex:t}})}}scrollToStart(){Object(l.a)(this.$refs.wishList).animate({scrollLeft:0},"350")}scrollToEnd(){let t=this.$refs.wishList.scrollWidth;"rtl"===this.dir&&(t=-this.$refs.wishList.scrollWidth),Object(l.a)(this.$refs.wishList).animate({scrollLeft:t},"350")}updateWishMaxHeight(t){const e=this.xMobileSurfaceLayoutV3?52:0;this.maxHeightForRealWishStyle.innerHTML=`\n      @media (min-height: 828px) {\n        .real-wish, .timeline-wish {\n          max-height: calc(var(--vh100)/2 - ${t}px/2 - var(--distance-from-post-to-line) - 24px - ${e}px/2 );\n        }\n        .real-wish, .timeline-wish.unapproved-wish {\n          max-height: calc(var(--vh100)/2 - ${t}px/2 - var(--distance-from-post-to-line) - 24px - 40px - ${e}px/2 );\n        }\n      }\n      @media (max-height: 828px) {\n        .real-wish, .timeline-wish {\n          max-height: calc(var(--vh100) - ${t}px - var(--distance-from-post-to-line) - var(--small-screen-bottom-padding) - 24px - ${e}px);\n        }\n        .real-wish, .timeline-wish.unapproved-wish {\n          max-height: calc(var(--vh100) - ${t}px - var(--distance-from-post-to-line) - var(--small-screen-bottom-padding) - 24px - 40px - ${e}px);\n        }\n      }\n      `}respondToHeaderHeightChanged(t){this.updateWishMaxHeight(t)}handleDraggingChanged(t){this.dragging=t,this.changeDragging({isAPostDragging:t})}mounted(){this.$nextTick(()=>{this.maxHeightForRealWishStyle=document.createElement("style"),this.updateWishMaxHeight(this.headerHeight),document.head.appendChild(this.maxHeightForRealWishStyle)}),this.observeIntersection()}observeIntersection(){this._startIntersectionObserver=new IntersectionObserver(t=>{0===t[0].intersectionRatio?this.isAtStart=!1:this.isAtStart=!0}),this._startIntersectionObserver.observe(this.$refs.startOfLine),this._endIntersectionObserver=new IntersectionObserver(t=>{0===t[0].intersectionRatio?this.isAtEnd=!1:this.isAtEnd=!0}),this._endIntersectionObserver.observe(this.$refs.endOfLine)}beforeDestroy(){this.disableNewPostHandlers()}enableNewPostHandlers(){this.$nextTick(()=>{this.isMobile||this.enableDoubleClickToPost(this.$el,this.$refs.draggableWrapper.$el),this.enableDropToPost(this.$refs.wallContainer),d.a.addEventListener("paste",this.handleOnPaste)})}disableNewPostHandlers(){this.disableDoubleClickToPost(this.$el),this.disableDropToPost(this.$refs.wallContainer),d.a.removeEventListener("paste",this.handleOnPaste)}handleOnPaste(t){var e,i,o,r;if(t.stopPropagation(),!this.isPostable)return;if(Object(n.f)(t))return;const s=Object(T.d)(t.clipboardData);if(!s||!s.length)return;const a=(null===(i=null===(e=t.clipboardData)||void 0===e?void 0:e.types)||void 0===i?void 0:i.includes("text/rtf"))&&(null===(r=null===(o=t.clipboardData)||void 0===o?void 0:o.types)||void 0===r?void 0:r.includes("Files")),d=Object(T.e)(s,T.a.File);if(d&&!a)return this.startNewDraft({attributes:d.postAttributes,shouldStartEditing:!0}),this.dockComposerModal(),void Object(D.a)("Posts","add","Paste "+d.pasteType);const l=s.filter(t=>(null===t||void 0===t?void 0:t.pasteType)!==T.a.File);this.startNewDraft({attributes:l[0].postAttributes,shouldStartEditing:!0}),this.dockComposerModal(),Object(D.a)("Posts","add","Paste "+l[0].pasteType)}toggleNewPostHandlers(t){t?this.enableNewPostHandlers():this.disableNewPostHandlers()}};$([Object(c.h)({default:()=>{}}),M("design:type","function"===typeof(E="undefined"!==typeof Record&&Record)?E:Object)],F.prototype,"reactionIdsByPostId",void 0),$([Object(c.h)({default:()=>{}}),M("design:type","function"===typeof(R="undefined"!==typeof Record&&Record)?R:Object)],F.prototype,"commentIdsByPostId",void 0),$([c.i,M("design:type",Boolean)],F.prototype,"xHeader",void 0),$([c.i,M("design:type",Boolean)],F.prototype,"inlinePostEdit",void 0),$([c.d,M("design:type",Boolean)],F.prototype,"isPostable",void 0),$([c.d,M("design:type",String)],F.prototype,"backgroundLuminance",void 0),$([c.d,M("design:type",Number)],F.prototype,"headerHeight",void 0),$([c.d,M("design:type",Boolean)],F.prototype,"canIWrite",void 0),$([c.d,M("design:type",String)],F.prototype,"dir",void 0),$([c.i,M("design:type",Object)],F.prototype,"commentsPanelPostId",void 0),$([c.i,M("design:type",Boolean)],F.prototype,"isMobile",void 0),$([c.d,M("design:type",Boolean)],F.prototype,"isReadOnly",void 0),$([c.d,M("design:type",Boolean)],F.prototype,"xDesktopSurfaceLayoutV3",void 0),$([c.d,M("design:type",Boolean)],F.prototype,"xMobileSurfaceLayoutV3",void 0),$([Object(c.m)("post").Getter,M("design:type",Object)],F.prototype,"newestPostCid",void 0),$([Object(c.m)("post").Getter,M("design:type",Object)],F.prototype,"postBeingEditedCid",void 0),$([Object(c.m)("post").Getter,M("design:type",Object)],F.prototype,"postBeingEdited",void 0),$([Object(c.m)("post").Action,M("design:type",Function)],F.prototype,"startNewPost",void 0),$([Object(c.m)("post").Action,M("design:type",Function)],F.prototype,"createPost",void 0),$([Object(c.m)("post").Getter,M("design:type",Array)],F.prototype,"currentSortedPosts",void 0),$([Object(c.m)("draft").Action,M("design:type",Function)],F.prototype,"startNewDraft",void 0),$([Object(c.m)("composerModal").Action("dock"),M("design:type",Function)],F.prototype,"dockComposerModal",void 0),$([Object(c.k)("newestPostCid"),M("design:type",Function),M("design:paramtypes",[Object]),M("design:returntype",void 0)],F.prototype,"respondToNewUserCreatedPost",null),$([Object(c.k)("commentsPanelPostId"),M("design:type",Function),M("design:paramtypes",[Object]),M("design:returntype",void 0)],F.prototype,"respondToCommentsPanelOpenedForPostId",null),$([Object(c.k)("postBeingEditedCid"),M("design:type",Function),M("design:paramtypes",[Object]),M("design:returntype",void 0)],F.prototype,"respondToPostBeingEditedCid",null),$([Object(c.k)("headerHeight"),M("design:type",Function),M("design:paramtypes",[Object]),M("design:returntype",void 0)],F.prototype,"respondToHeaderHeightChanged",null),$([c.a,M("design:type",Function)],F.prototype,"changeDragging",void 0),$([Object(c.k)("isPostable",{immediate:!0}),M("design:type",Function),M("design:paramtypes",[Object]),M("design:returntype",void 0)],F.prototype,"toggleNewPostHandlers",null),F=$([Object(c.b)({components:{SurfaceHeader:s.a,SurfaceContainerTimelinePostsLtr:S,SurfaceContainerTimelinePostsRtl:A,BaseIcon:u.a},mixins:[_.a,L.a]})],F);var W=F,H=(i(1315),Object(O.a)(W,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{ref:"wallContainer",attrs:{id:"wall-container"}},[t.xHeader?e("SurfaceHeader",{ref:"surfaceHeader"}):t._e(),t._v(" "),e("div",{ref:"wishList",class:["wish-list-wrapper","background-luminance-"+t.backgroundLuminance,{"scrollbar-photo":"light"===t.backgroundLuminance,"scrollbar-photo-dark":"dark"===t.backgroundLuminance}],attrs:{id:"wish-list",dir:t.dir}},[e("div",{staticClass:"wish-list-content"},["rtl"===t.dir?e("SurfaceContainerTimelinePostsRtl",{ref:"draggableWrapper",attrs:{"post-being-edited-cid":t.postBeingEditedCid,"inline-post-edit":t.inlinePostEdit,"current-sorted-posts":t.currentSortedPosts,"reaction-ids-by-post-id":t.reactionIdsByPostId,"comment-ids-by-post-id":t.commentIdsByPostId},on:{dragging:t.handleDraggingChanged}}):e("SurfaceContainerTimelinePostsLtr",{ref:"draggableWrapper",attrs:{"post-being-edited-cid":t.postBeingEditedCid,"inline-post-edit":t.inlinePostEdit,"current-sorted-posts":t.currentSortedPosts,"reaction-ids-by-post-id":t.reactionIdsByPostId,"comment-ids-by-post-id":t.commentIdsByPostId},on:{dragging:t.handleDraggingChanged}}),t._v(" "),e("div",{staticClass:"line-group-wrapper"},[e("span",{ref:"startOfLine"}),t._v(" "),t._l(t.currentSortedPosts,(function(i){return e("div",{key:i.cid,staticClass:"line-wrapper"},[e("div",{class:"line "+(t.canShowAddPostButton?"":"no-clipping")}),t._v(" "),t.canShowAddPostButton?e("button",{class:["icon-button add-button",t.xDesktopSurfaceLayoutV3&&"v3"],on:{click:function(e){return t.addBefore(i)}}},[e("base-icon",{attrs:{name:"rounded_add"}})],1):t._e()])})),t._v(" "),e("div",{staticClass:"line-wrapper"},[e("div",{class:`line background-luminance-${t.backgroundLuminance} ${t.canShowAddPostButton?"":"no-clipping"}`}),t._v(" "),t.canShowAddPostButton?e("button",{class:["icon-button add-button",t.xDesktopSurfaceLayoutV3&&"v3"],on:{click:t.addToLast}},[e("base-icon",{attrs:{name:"rounded_add"}})],1):t._e()]),t._v(" "),t._m(0),t._v(" "),t.xMobileSurfaceLayoutV3?t._e():e("button",{class:`icon-button scroll-button start ${t.isAtStart?"disabled":""} background-luminance-${t.backgroundLuminance}`,on:{click:t.scrollToStart}},[e("base-icon",{attrs:{name:"first_page"}})],1),t._v(" "),t.xMobileSurfaceLayoutV3?t._e():e("button",{class:["icon-button scroll-button","end",t.isAtEnd&&"disabled",t.xDesktopSurfaceLayoutV3&&"v3"],on:{click:t.scrollToEnd}},[e("base-icon",{attrs:{name:"last_page"}})],1),t._v(" "),e("span",{ref:"endOfLine"})],2)],1),t._v(" "),e("svg",{attrs:{width:"0",height:"0",xmlns:"http://www.w3.org/2000/svg"}},[e("defs",[e("clipPath",{attrs:{id:"clipping",clipPathUnits:"objectBoundingBox"}},[e("path",{attrs:{d:"M0 -0.5 h1 v2 h-1z M0.428 0 v2 h0.142 v-2z"}})])])])])],1)}),[function(){var t=this._self._c;this._self._setupProxy;return t("div",{staticClass:"line-wrapper line-wrapper-extender"},[t("div",{staticClass:"line extended",attrs:{id:"line-extended"}})])}],!1,null,null,null));e.default=H.exports}}]);
//# sourceMappingURL=186-c8ec68a5fdf1d4c4266f.chunk.js.map